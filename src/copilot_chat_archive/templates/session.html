<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ session.workspace_name or session.session_id }} - {{ title }}</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>{{ title }}</h1>
        </div>
    </header>

    <main class="container">
        <a href="../index.html" class="back-link">&larr; Back to all sessions</a>

        <div class="session-header">
            <h2>
                {% if session.workspace_name %}
                    {{ session.workspace_name }}
                {% else %}
                    Session {{ session.session_id[:8] }}...
                {% endif %}
            </h2>
            <div class="session-meta">
                <span>{{ message_count }} messages</span>
                {% if session.workspace_path %}
                <span>Path: {{ session.workspace_path }}</span>
                {% endif %}
                {% if session.created_at %}
                <span>Created: {{ session.created_at }}</span>
                {% endif %}
                <span class="edition-badge {{ session.vscode_edition }}">{{ session.vscode_edition }}</span>
            </div>
        </div>

        <div class="messages">
            {% for message in session.messages %}
            <div class="message {{ message.role }}">
                <div class="message-role">{{ message.role }}</div>
                <div class="message-content">
                    {{ message.content | markdown | safe }}
                </div>
                {% if message.timestamp %}
                <div class="message-timestamp">{{ message.timestamp }}</div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </main>

    <footer>
        <div class="container">
            Generated by <a href="https://github.com/Arithmomaniac/copilot-repository-tools">Copilot Chat Archive</a>
        </div>
    </footer>
</body>
</html>
