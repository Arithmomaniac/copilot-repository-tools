<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>{{ title }}</h1>
            <div class="stats">
                {{ stats.session_count }} sessions &bull; 
                {{ stats.message_count }} messages &bull; 
                {{ stats.workspace_count }} workspaces
                {% if stats.editions %}
                    &bull;
                    {% for edition, count in stats.editions.items() %}
                        <span class="edition-badge {{ edition }}">{{ edition }}: {{ count }}</span>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </header>

    <main class="container">
        <div class="search-box">
            <input type="text" id="search-input" placeholder="Search sessions..." autocomplete="off">
        </div>

        {% if workspaces %}
        <div class="workspaces">
            {% for ws in workspaces %}
            <span class="workspace-tag" data-workspace="{{ ws.workspace_name }}">
                {{ ws.workspace_name }} ({{ ws.session_count }})
            </span>
            {% endfor %}
        </div>
        {% endif %}

        <ul class="session-list" id="session-list">
            {% for session in sessions %}
            <li class="session-item" data-workspace="{{ session.workspace_name or '' }}">
                <a href="sessions/{{ session.session_id }}.html">
                    {% if session.workspace_name %}
                        {{ session.workspace_name }}
                    {% else %}
                        Session {{ session.session_id[:8] }}...
                    {% endif %}
                </a>
                <div class="session-meta">
                    <span>{{ session.message_count }} messages</span>
                    {% if session.created_at %}
                    <span>Created: {{ session.created_at | format_timestamp }}</span>
                    {% endif %}
                    <span class="edition-badge {{ session.vscode_edition }}">{{ session.vscode_edition }}</span>
                </div>
            </li>
            {% else %}
            <li class="no-results">No sessions found. Import some chat history first!</li>
            {% endfor %}
        </ul>
    </main>

    <footer>
        <div class="container">
            Generated by <a href="https://github.com/Arithmomaniac/copilot-repository-tools">Copilot Chat Archive</a>
        </div>
    </footer>

    <script src="static/script.js"></script>
</body>
</html>
